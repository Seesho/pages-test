<html>
  <head>
  </head>
  <body>

    <div id="selectionDiv" class="btn-group-sm container-fluid">
      <button ng-click="selectAll()"
              class="btn btn-default">Select All</button>
      <button ng-click="deselectAll()"
              class="btn btn-default">Deselect All</button>
    </div>

    <div id="removeDiv" class="btn-group-sm container-fluid">
      <button ng-click="removeSelected()"
              class="btn btn-danger">Remove selected</button>
      <button ng-click="undoRemove()"
              class="btn btn-info">Undo remove</button>
    </div>

    <div id="transactionTable" class="container-fluid">
      <table class="table table-hover">
        <thead>
          <tr>
            <th ng-click="selectOrder('selected')">Selected</th>
            <th ng-click="selectOrder('amount')">Amount</th>
            <th ng-click="selectOrder('description')">Description</th>
            <th ng-click="selectOrder('category')">Category</th>
            <th ng-click="selectOrder('date')">Date</th>
          </tr>
          <tr>
            <td>
              <select ng-model="currency" ng-init="currency=currencies[0]"
                      ng-options="currency for currency in currencies" class="form-control">
              </select>
            </td>
            <td>
              <input type="number" step="0.01" ng-model="amount" placeholder="Amount" class="form-control"/>
            </td>
            <td>
              <input type="text" ng-model="description" placeholder="Description" class="form-control"/>
            </td>
            <td>
              <select ng-model="category" ng-init="category=categories[0]"
                      ng-options="category for category in categories" class="form-control">
              </select>
            </td>
            <td>
              <button ng-click="addTransaction(currency,amount,description,category)"
                      type="button"
                      class="btn btn-success">Add</button>
            </td>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="t in transactions | orderBy:ordering:orderReverse" ng-click="setModal($index, t)">
            <td class=""><input type="checkbox" ng-model="t.selected" ng-click="calcTotal()"></td>
            <td class="editable" data-toggle="modal" data-target="#editTransaction"><p>{{t.currency}}{{t.amount}}</p></td>
            <td class="editable" data-toggle="modal" data-target="#editTransaction"><p>{{t.description}}</p></td>
            <td class="editable" data-toggle="modal" data-target="#editTransaction"><p>{{t.category}}</p></td>
            <td class="editable" data-toggle="modal" data-target="#editTransaction"><p>{{t.date | date:'MM-dd-yyyy'}}</p></td>

          </tr>
        </tbody>
      </table>
    </div>

    <div ng-init="calcTotal()" class="container-fluid">
      Total: ${{total | number:2}}
    </div>

    <!-- Modal -->
    <div id="editTransaction" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Edit transaction</h4>
          </div>
          <div class="modal-body">
            <!-- <p>{{currIndex}}</p> -->
            <!-- <p>Current Amount: {{currTransaction}}</p> -->
            <label>Amount:</label>
            <input class="form-control" ng-model='currTransaction.amount' type="number" step="0.01" placeholder="Amount"/>
            <label>Description:</label>
            <input class="form-control" ng-model='currTransaction.description' type="text" placeholder="Description"/>
            <label>Description:</label>
            <select class="form-control" ng-model='currTransaction.category' ng-options="category for category in categories" class="form-control"></select>
            <label>Date:</label>
            <input class="form-control" ng-model='currTransaction.date' type="date"/>
          </div>
          <div class="modal-footer">
            <button ng-click="saveChanges()" type="button" class="btn btn-primary" data-dismiss="modal">Save</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="debug" ng-if="">
      <!-- TODO:
      * FILTERING BASED ON CATEGORY
      * CUSTOMIZING CATEGORY, CURRENCY, ETC.
      * SELECT FROM PREVIOUSLY ENTERED TEXT ENTRIES
      * ENTER TO SUBMIT AN ENTRY
      * SHORT DESC ON TABLE VIEW
      * MODAL WINDOW POP UP TO VIEW MORE DETAILS
      * ADD CARETS TO DISPLAY WHICH WAY IT'S SORTING
      * SHIFT CLICK TO SELECT MULTIPLE
      -->

      <!-- DONE:
      * ADD DATES
      * REMOVE ABILITY
      * SORTING FOR OTHER FIELDS
      * SAVED DATA
      * TOTAL OF SELECTED
      -->
      {{amount | currency:"USD$"}} <br />
      CURRENT TRANSACTIONS: <br />
      {{transactions}} <br />
      {{ordering}}:{{orderReverse}} <br />
      <div>
        {{t.amount}}<br />
      </div>
      DELETED TRANSACTIONS: <br />
      {{deletedTransactions}} <br />
      TESTING: <br />
      {{test}}

    </div>
  </body>
</html>
